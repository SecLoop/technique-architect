




## 整体流程

* 首先对提案进行预处理`preProcess()`
    * 这一步主要就是对提案中的内容进行相关验证操作。
    * 验证Header信息
    * 验证证书信息
    * 判断调用的链码类型与通道信息。  
* 然后对提案进行模拟`SimulateProposal()`
    * 获取调用的链码的具体功能与参数。
    * 判断链码类型，用户链码需要检查实例化策略，系统链码只获取版本信息。
    * 创建Tx模拟器，调用`callChaincode()`方法进行模拟。
    * 记录模拟时间，执行链码，判断是否调用的是lscc，功能为upgrade或者为deploy。如果是的话进行链码的Init。
    * 对模拟完成的账本进行快照，返回模拟结果集。
* 最后进行背书操作`endorseProposal()`
    * 获取进行背书操作的链码
    * 获取链码事件与链码版本信息
    * 获取背书所需要的插件，获取调用链码的相关数据
    * 通过获取的插件进行背书操作
    * 返回背书响应










参考:   
[Fabric1.4源码解析：Peer节点背书提案过程](https://www.cnblogs.com/cbkj-xd/p/11077490.html)