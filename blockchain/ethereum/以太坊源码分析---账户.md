


## 外部账户

* 创建随机私钥(64位16进制字符/32字节): `ecdsa.GenerateKey(crypto.S256(), rand)`
* 从私钥推导出公钥(128位16进制字符/64字节): `privateKeyECDSA.PublicKey)`
* 从公钥推导出地址(40位16进制字符/20字节): `Keccak256(pubBytes[1:])[12:]`

函数入口`internal/ethapi/api.go=>NewAccount(password string)`,password把key结构体信息加密

## 内部账户
对交易发起人的地址和nonce进行RLP编码，再算出Keccak哈希值，取后20个字节作为该合约的地址,即:`
Keccak-256(RLP(sender, nonce))[12:]`
函数位于:`crypto/crypto.go`
```
// CreateAddress creates an ethereum address given the bytes and the nonce
func CreateAddress(b common.Address, nonce uint64) common.Address {
	data, _ := rlp.EncodeToBytes([]interface{}{b, nonce})
	return common.BytesToAddress(Keccak256(data)[12:])
}
```

![account_diff](../../file/account_diff.png)


参考:   
[以太坊账户管理源码分析](https://blog.csdn.net/TurkeyCock/article/details/80429377)    
[从命令行开始解析以太坊新建账户过程（geth account new命令）](https://blog.csdn.net/jiang_xinxing/article/details/80289694)  